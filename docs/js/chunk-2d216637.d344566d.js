(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216637"],{c1f9:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",[t("v-card-title",{attrs:{"primary-title":""}},[t("h3",{staticClass:"headline mb-0"},[e._v("消息签名")])]),t("v-divider"),t("v-card-text",[e._v('\n    Sign for "Hello from Junezhu.top"\n    '),t("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.requestSignature}},[e._v("单行信息签名")])],1),t("v-divider"),t("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs6:"",sm4:""}},[t("v-text-field",{attrs:{label:"name"},model:{value:e.name,callback:function(r){e.name=r},expression:"name"}})],1),t("v-flex",{attrs:{xs6:"",sm5:""}},[t("v-text-field",{attrs:{label:"email"},model:{value:e.email,callback:function(r){e.email=r},expression:"email"}})],1),t("v-flex",{attrs:{xs12:"",sm3:""}},[t("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.requestMoreSignature}},[e._v("多行信息签名")])],1)],1)],1),t("v-divider"),t("v-card-title",[t("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.requestMoreSignature_v3}},[e._v("信息带对象的签名")])],1)],1)},o=[],a=(t("7f7f"),t("f499")),s=t.n(a),c=(t("bac7"),t("4260"),t("1ed9")),l=t("b671"),i={created:function(){},data:function(){return{name:"june",email:"123@qq.com"}},methods:{requestSignature:function(){var e=web3.eth.accounts[0],r=web3.toHex("Hello from Junezhu.top"),t=[r,e],n="personal_sign";web3.currentProvider.sendAsync({method:n,params:t,from:e},function(t,o){if(t)return console.error(t);if(o.error)return console.error(o.error);console.log("PERSONAL SIGNED:"+s()(o.result)),console.log("recovering...");var a={data:r};a.sig=o.result,n="personal_ecRecover";var c=[r,o.result];web3.currentProvider.sendAsync({method:n,params:c,from:e},function(r,t){var n=t.result;return console.log("ec recover called back:"),console.dir({err:r,recovered:n}),r?console.error(r):t.error?console.error(t.error):void(n===e?(console.log("Successfully ecRecovered signer as "+e),alert("Successfully ecRecovered signer as "+e)):console.log("Failed to verify signer when comparing "+t+" to "+e))})})},requestMoreSignature:function(){var e=web3.eth.accounts[0],r=[{type:"string",name:"Msg",value:"Create Account"},{type:"string",name:"Name",value:this.name},{type:"string",name:"Email",value:this.email}],t=[r,e],n="eth_signTypedData";web3.currentProvider.sendAsync({method:n,params:t,from:e},function(t,n){if(t)return console.dir(t);if(n.error&&alert(n.error.message),n.error)return console.error(n);console.log("PERSONAL SIGNED:"+s()(n.result));var o=c.recoverTypedSignatureLegacy({data:r,sig:n.result});l.toChecksumAddress(o)===l.toChecksumAddress(e)?alert("Successfully ecRecovered signer as "+e):alert("Failed to verify signer when comparing "+n+" to "+e)})},requestMoreSignature_v3:function(){var e=s()({types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person"},{name:"contents",type:"string"}]},primaryType:"Mail",domain:{name:"Ether Mail",version:"1",chainId:3,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},message:{from:{name:"Cow",wallet:"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},to:{name:"Bob",wallet:"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},contents:"Hello, Bob!"}}),r=web3.eth.accounts[0];console.log("CLICKED, SENDING PERSONAL SIGN REQ","from",r,e);var t=[r,e];console.dir(t);var n="eth_signTypedData_v3";web3.currentProvider.sendAsync({method:n,params:t,from:r},function(t,n){if(t)return console.dir(t);if(n.error&&alert(n.error.message),n.error)return console.error("ERROR",n);console.log("TYPED SIGNED:"+s()(n.result));var o=c.recoverTypedSignature({data:JSON.parse(e),sig:n.result});l.toChecksumAddress(o)===l.toChecksumAddress(r)?alert("Successfully ecRecovered signer as "+r):alert("Failed to verify signer when comparing "+n+" to "+r)})}}},u=i,d=t("2877"),m=Object(d["a"])(u,n,o,!1,null,null,null);r["default"]=m.exports}}]);