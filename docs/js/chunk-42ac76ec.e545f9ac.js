(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42ac76ec"],{"29ce":function(t,e,n){},"7e6c":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var a=[{constant:!1,inputs:[{name:"_myid",type:"bytes32"},{name:"_result",type:"string"}],name:"__callback",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_queryId",type:"bytes32"},{name:"_result",type:"string"},{name:"_proof",type:"bytes"}],name:"__callback",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"kill",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"startChooseWinnerProcess",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"dice",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"attendee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"minEntry",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"flag",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getB",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"order",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_order",type:"uint256"}],name:"getHistory",outputs:[{name:"",type:"address[]"},{name:"",type:"address"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_minEntry",type:"uint8"}],name:"setMinEntry",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"winner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"enter",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"players",outputs:[{name:"_account",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"who",type:"address"},{indexed:!1,name:"minEntry",type:"uint256"}],name:"MinEntryChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"who",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"PlayerEntered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"who",type:"address"}],name:"WinnerSelected",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"timestamp",type:"uint256"}],name:"NewRoundStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"dice",type:"string"}],name:"logRandom",type:"event"}],o="0x8485ff07c9e926eed8a8d0993d0122f49a6a830b"},a604:function(t,e,n){"use strict";var a=n("29ce"),o=n.n(a);o.a},c1f3:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"RNG"},[n("h3",[t._v("Ropsten Only")]),n("button",{on:{click:t.entry}},[t._v("参加")]),n("p",[t._v("Get random number ")]),t.getApiRadNumPending?n("img",{staticClass:"loader",attrs:{src:"https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"}}):n("button",{on:{click:t.getApiRadNum}},[t._v("Generate")]),n("p",[t._v("Random Number: "+t._s(t.luckyNum))]),n("p",[t._v(t._s(t.luckyNumTime))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.historyNum,expression:"historyNum"}],domProps:{value:t.historyNum},on:{input:function(e){e.target.composing||(t.historyNum=e.target.value)}}}),n("button",{on:{click:t.getHistory}},[t._v("历史")])])},o=[],i=(n("96cf"),n("3b8d")),s=(n("cadf"),n("551c"),n("097d"),n("bac7")),u=n.n(s),r=n("4260"),c=n("7e6c"),m={created:function(){this.getWeb3()},data:function(){return{web3:void 0,isMetamask:!1,RNGContract:void 0,RNG:void 0,luckyNum:"empty",luckyNumTime:"",getApiRadNumPending:!1,randomContract:void 0,oraRandom:void 0,oraRadNum:"empty",oraRadNumTime:"",getOraRadNumPending:!1,wolContract:void 0,wolRandom:void 0,wolNum:"empty",wolNumTime:"",getWolNumPending:!1,myAddress:"",historyNum:""}},methods:{getWeb3:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!window.ethereum){t.next=21;break}return window.web3=new u.a(ethereum),t.prev=2,ethereum.enable(),this.isMetamask=!0,t.next=7,ethereum.enable();case 7:return t.next=9,web3.eth.getAccounts();case 9:e=t.sent,this.myAddress=e[0],console.log("accounts",e),console.log("Get Web3!"),this.setContract(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](2),this.isMetamask=!1;case 19:t.next=22;break;case 21:window.web3?(window.web3=new u.a(web3.currentProvider),this.isMetamask=!0):(console.log("Non-Ethereum browser detected. You should consider trying MetaMask!"),this.isMetamask=!1);case 22:case"end":return t.stop()}},t,this,[[2,16]])}));function e(){return t.apply(this,arguments)}return e}(),setContract:function(){console.log("cc");var t=new web3.eth.Contract(c["a"],c["b"]);this.RNG=t},getAccount:function(){this.isMetamask?window.web3.eth.accounts[0]?this.myAddress=window.web3.eth.accounts[0]:alert("Please log in to Metamask"):window.web3.eth.accounts[0]=this.myAddress},entry:function(){this.RNG.methods.enter.send({value:window.web3.utils.toWei("0.1","ether"),from:this.myAddress}).on("error",function(t){console.error(t)}).on("transactionHash",function(t){console.log("交易哈希",t)})},getApiRadNum:function(){var t,e,n=this;this.luckyNum="empty",this.getApiRadNumPending=!0,this.isMetamask&&this.RNG.methods.startChooseWinnerProcess.send({value:window.web3.utils.toWei("0.01","ether"),from:this.myAddress}).on("error",function(t){console.error(t)}).on("transactionHash",function(e){console.log("交易哈希",e),t=(new Date).getTime()}).on("confirmation",function(t,e){n.getApiRadNumPending=!1,console.log("确认的区块数",t),1===t&&(n.RNG.events.logRandom({fromBlock:e.blockNumber},function(t,e){t?console.log(t):(console.log("logRandom",e),e.returnValues.dice&&(n.luckyNum=e.returnValues.dice))}),n.RNG.events.NewRoundStarted({fromBlock:e.blockNumber},function(t,e){t?console.log(t):console.log("NewRoundStarted",e.returnValues.timestamp)}))}).on("receipt",function(a){console.log("receipt1",a),e=(new Date).getTime(),n.luckyNumTime="Cost: "+Object(r["b"])(e-t,"{i}:{s}")})},getHistory:function(){this.RNG.methods.getHistory(this.historyNum).call().then(function(t){console.log("res",t)})}}},p=m,l=(n("a604"),n("2877")),y=Object(l["a"])(p,a,o,!1,null,null,null);e["default"]=y.exports}}]);