(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-532bec31"],{"405a":function(t,e,n){"use strict";var a=n("ac2d"),s=n.n(a);s.a},"91d0":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"casino"},[n("v-container",{staticClass:"text-xs-center",attrs:{"grid-list-lg":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:""}},[n("v-toolbar",{attrs:{color:"pink",dark:""}},[n("v-toolbar-title",[t._v("Welcome to the Casino")])],1)],1)],1),n("v-list",{attrs:{"two-line":""}},[n("v-flex",{attrs:{xs12:"",sm12:"","offset-sm4":""}},[n("v-list-tile",[n("p",{staticClass:"title"},[t._v("Prize pool："+t._s(t.contractBalance)+" ETH")])])],1),n("v-divider"),n("v-flex",{attrs:{xs12:"",sm12:"","offset-sm5":""}},[n("v-card-title",{attrs:{"primary-title":""}},[t._v("\n          Guess（1～10）\n        ")])],1),n("v-flex",{attrs:{xs12:""}},[n("p",[t._v("You can get a 1-to-1 odds on the winning bet ")])]),n("v-divider"),n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-list-tile",[n("v-text-field",{attrs:{label:"Bet",required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v("Ether\n        ")],1)],1)],1),t.pending?n("img",{staticClass:"loader",attrs:{src:"https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"}}):t._e(),n("p",{staticClass:"address"},[t._v("Address："+t._s(t.myAddress))]),n("p",[t._v("Balance："+t._s(t.accountBalance)+" ETH")]),t.isChooseNum?n("p",[t._v("The number you guess is："+t._s(t.chooseNum))]):t._e(),t.winEvent?n("div",{staticClass:"event"},[n("p",[t._v("Lucky number is "+t._s(t.luckyNum))]),t.winEvent._status?n("p",{staticClass:"green"},[t._v("\n        Excellent!!! Get "+t._s(t.winEvent._amount)+" ETH\n      ")]):n("p",{staticClass:"red-text"},[t._v("\n        OH NO ~ Try again\n      ")])]):t._e(),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.Numbers,function(e){return n("v-flex",{attrs:{xs3:"",sm2:""}},[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.hover;return n("v-card",{staticClass:"mx-auto",class:"elevation-"+(s?12:2),attrs:{width:"50"},on:{click:function(n){return t.clickNumber(e)}}},[n("v-card-title",[t._v(t._s(e))])],1)}}],null,!0)})],1)}),1)],1)],1)},s=[],o=(n("96cf"),n("3b8d")),i=n("e814"),c=n.n(i),r=(n("6b54"),n("cadf"),n("551c"),n("097d"),n("bac7")),u=n.n(r),l=n("81ad"),d=n.n(l),h=(n("dbd9"),n("4260")),w=[{constant:!0,inputs:[],name:"getBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdraw",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"kill",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_minBet",type:"uint256"},{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],m="0x39EFaFde0B067F4021697Be98C0c3bBf7dC8B83c",p=n("92f9"),v={created:function(){this.getWeb3(),this.setContract()},mounted:function(){this.$nextTick(function(){var t=this;this.checkHouseEdge(),this.checkCasinoBalance();setInterval(function(){t.getAccount()},1e3)})},data:function(){return{web3:void 0,isMetamask:!1,network:"",ABI:null,contractAddr:"",casinoContract:void 0,casino:void 0,myAddress:"",myPrivateKey:"",odds:null,amount:.001,pending:!1,winEvent:null,showEnv:!1,accountBalance:null,contractBalance:0,chooseNum:null,isChooseNum:!1,luckyNum:null,Numbers:[1,2,3,4,5,6,7,8,9,10],tx:null}},methods:{getWeb3:function(){if(this.ABI=w,this.contractAddr=m,window.ethereum){window.web3=new u.a(ethereum);try{ethereum.enable(),this.isMetamask=!0}catch(t){this.isMetamask=!1}}else window.web3?(window.web3=new u.a(web3.currentProvider),this.isMetamask=!0):(console.log("Non-Ethereum browser detected. You should consider trying MetaMask!"),this.isMetamask=!1);console.log("Get Web3!"),this.showNetwork()},showNetwork:function(){var t={1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain"},e=window.web3.version.network;this.network=t[e]},setContract:function(){this.casinoContract=window.web3.eth.contract(this.ABI),this.casino=this.casinoContract.at(this.contractAddr),console.log("Set Contract!")},checkHouseEdge:function(){var t=this,e="0x"+d.a.methodID("houseEdge",[]).toString("hex");window.web3.eth.call({to:this.contractAddr,data:e},function(e,n){e?console.error(e):t.odds=c()(n,16)})},clickNumber:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e,n){var a,s,o,i,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="0x"+d.a.simpleEncode("bet(uint256)",e).toString("hex"),s={gasPrice:window.web3.toWei("0.00000001","ether"),value:window.web3.toWei(this.amount,"ether"),from:window.web3.eth.coinbase,data:a,to:this.contractAddr},t.next=4,Object(p["a"])(s);case 4:o=t.sent,s.gas=o,this.chooseNum=e,this.isChooseNum=!0,i=this.amount*this.odds,this.amount<=0&&alert("No way! There are too few bets."),this.contractBalance<=i&&alert("The prize pool is not enough, please reduce the bet."),this.contractBalance>i&&this.amount>0&&(this.winEvent=null,this.pending=!0,this.isMetamask?this.casino.bet(e,s,function(t,e,n){if(t)r.pending=!1,console.error(t);else{r.tx=e;var a=r.casino.Won();a.watch(function(t,e){if(t)r.pending=!1,console.error(t);else{r.pending=!1,r.amount=0;var n=e.blockNumber%10+1;r.luckyNum=n,r.winEvent=e.args,r.winEvent._amount=c()(e.args._amount,10)/Math.pow(10,18),r.checkCasinoBalance(),a.stopWatching()}})}}):alert("Please log in to Metamask"));case 12:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),checkNetwork:function(){this.showEnv?this.showEnv=!1:this.showEnv=!0},getAccount:function(){var t=this;this.isMetamask?window.web3.eth.accounts[0]?this.myAddress=window.web3.eth.accounts[0]:alert("Please log in to Metamask"):window.web3.eth.accounts[0]=this.myAddress,window.web3.eth.getBalance(this.myAddress,function(e,n){e?console.error(e):t.accountBalance=Object(h["d"])(n)/Math.pow(10,18)})},checkCasinoBalance:function(){var t=this;window.web3.eth.getBalance(this.contractAddr,function(e,n){e?console.error(e):t.contractBalance=Object(h["d"])(n)/Math.pow(10,18)})}}},b=v,f=(n("405a"),n("2877")),y=Object(f["a"])(b,a,s,!1,null,"4302735d",null);e["default"]=y.exports},ac2d:function(t,e,n){}}]);