(function(t){function e(e){for(var o,i,s=e[0],u=e[1],c=e[2],d=0,f=[];d<s.length;d++)i=s[d],a[i]&&f.push(a[i][0]),a[i]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={dice:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dapp-lab/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;r.push([4,"chunk-vendors"]),n()})({0:function(t,e){},"043a":function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return u});n("f499");var o=n("795b"),a=n.n(o),r=n("ed08");function i(){return new a.a(function(t,e){window.web3.eth.getGasPrice(function(e,n){e?console.error(e):t(n)})})}function s(t){return new a.a(function(e,n){window.web3.eth.estimateGas(t,function(t,n){t?console.error(t):e(n)})})}function u(t){return new a.a(function(e,n){window.web3.eth.getTransactionCount(t,function(t,n){t?console.error(t):e(Object(r["d"])(n))})})}},1:function(t,e){},1429:function(t,e,n){},2:function(t,e){},3:function(t,e){},3523:function(t,e,n){"use strict";var o=n("1429"),a=n.n(o);a.a},4:function(t,e,n){t.exports=n("b63d")},"7cde":function(t,e,n){},b63d:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"casino",attrs:{id:"app"}},[n("v-container",{staticClass:"text-xs-center",attrs:{"grid-list-lg":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:""}},[n("v-toolbar",{attrs:{color:"pink",dark:""}},[n("v-toolbar-title",[t._v("Welcome to the Casino")])],1)],1)],1),n("v-list",{attrs:{"two-line":""}},[n("v-flex",{attrs:{xs12:"",sm12:"","offset-sm4":""}},[n("v-list-tile",[n("p",{staticClass:"title"},[t._v("Prize pool："+t._s(t.contractBalance)+" ETH")])])],1),n("v-divider"),n("v-flex",{attrs:{xs12:"",sm12:"","offset-sm5":""}},[n("v-card-title",{attrs:{"primary-title":""}},[t._v("\n          Guess（1～10）\n        ")])],1),n("v-flex",{attrs:{xs12:""}},[n("p",[t._v("You can get a 1-to-1 odds on the winning bet ")])]),n("v-divider"),n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-list-tile",[n("v-text-field",{attrs:{label:"Bet",required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v("Ether\n        ")],1)],1)],1),t.pending?n("img",{staticClass:"loader",attrs:{src:"https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"}}):t._e(),n("p",{staticClass:"address"},[t._v("Address："+t._s(t.myAddress))]),n("p",[t._v("Balance："+t._s(t.accountBalance)+" ETH")]),t.isChooseNum?n("p",[t._v("The number you guess is："+t._s(t.chooseNum))]):t._e(),t.winEvent?n("div",{staticClass:"event"},[n("p",[t._v("Lucky number is "+t._s(t.luckyNum))]),t.winEvent._status?n("p",{staticClass:"green"},[t._v("\n        Excellent!!! Get "+t._s(t.winEvent._amount)+" ETH\n      ")]):n("p",{staticClass:"red-text"},[t._v("\n        OH NO ~ Try again\n      ")])]):t._e(),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.Numbers,function(e,o){return n("v-flex",{key:"dice-"+o,attrs:{xs3:"",sm2:""}},[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.hover;return n("v-card",{staticClass:"mx-auto",class:"elevation-"+(a?12:2),attrs:{width:"50"},on:{click:function(n){return t.clickNumber(e)}}},[n("v-card-title",[t._v(t._s(e))])],1)}}],null,!0)})],1)}),1)],1)],1)},r=[],i=(n("96cf"),n("3b8d")),s=n("e814"),u=n.n(s),c=(n("6b54"),n("bac7")),l=n.n(c),d=n("81ad"),f=n.n(d),h=(n("dbd9"),n("ed08")),p=[{constant:!0,inputs:[],name:"getBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdraw",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"kill",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_minBet",type:"uint256"},{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],b="0x39EFaFde0B067F4021697Be98C0c3bBf7dC8B83c",w=n("043a"),m={created:function(){this.getWeb3(),this.setContract()},mounted:function(){this.$nextTick(function(){var t=this;this.checkHouseEdge(),this.checkCasinoBalance();setInterval(function(){t.getAccount()},1e3)})},data:function(){return{web3:void 0,isMetamask:!1,network:"",ABI:null,contractAddr:"",casinoContract:void 0,casino:void 0,myAddress:"",myPrivateKey:"",odds:null,amount:.001,pending:!1,winEvent:null,showEnv:!1,accountBalance:null,contractBalance:0,chooseNum:null,isChooseNum:!1,luckyNum:null,Numbers:[1,2,3,4,5,6,7,8,9,10],tx:null}},methods:{getWeb3:function(){if(this.ABI=p,this.contractAddr=b,window.ethereum){window.web3=new l.a(ethereum);try{ethereum.enable(),this.isMetamask=!0}catch(t){this.isMetamask=!1}}else window.web3?(window.web3=new l.a(web3.currentProvider),this.isMetamask=!0):(console.log("Non-Ethereum browser detected. You should consider trying MetaMask!"),this.isMetamask=!1);console.log("Get Web3!"),this.showNetwork()},showNetwork:function(){var t={1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain"},e=window.web3.version.network;this.network=t[e]},setContract:function(){this.casinoContract=window.web3.eth.contract(this.ABI),this.casino=this.casinoContract.at(this.contractAddr),console.log("Set Contract!")},checkHouseEdge:function(){var t=this,e="0x"+f.a.methodID("houseEdge",[]).toString("hex");window.web3.eth.call({to:this.contractAddr,data:e},function(e,n){e?console.error(e):t.odds=u()(n,16)})},clickNumber:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var o,a,r,i,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o="0x"+f.a.simpleEncode("bet(uint256)",e).toString("hex"),a={gasPrice:window.web3.toWei("0.00000001","ether"),value:window.web3.toWei(this.amount,"ether"),from:window.web3.eth.coinbase,data:o,to:this.contractAddr},t.next=4,Object(w["a"])(a);case 4:r=t.sent,a.gas=r,this.chooseNum=e,this.isChooseNum=!0,i=this.amount*this.odds,this.amount<=0&&alert("No way! There are too few bets."),this.contractBalance<=i&&alert("The prize pool is not enough, please reduce the bet."),this.contractBalance>i&&this.amount>0&&(this.winEvent=null,this.pending=!0,this.isMetamask?this.casino.bet(e,a,function(t,e,n){if(t)s.pending=!1,console.error(t);else{s.tx=e;var o=s.casino.Won();o.watch(function(t,e){if(t)s.pending=!1,console.error(t);else{s.pending=!1,s.amount=0;var n=e.blockNumber%10+1;s.luckyNum=n,s.winEvent=e.args,s.winEvent._amount=u()(e.args._amount,10)/Math.pow(10,18),s.checkCasinoBalance(),o.stopWatching()}})}}):alert("Please log in to Metamask"));case 12:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),checkNetwork:function(){this.showEnv?this.showEnv=!1:this.showEnv=!0},getAccount:function(){var t=this;this.isMetamask?window.web3.eth.accounts[0]?this.myAddress=window.web3.eth.accounts[0]:alert("Please log in to Metamask"):window.web3.eth.accounts[0]=this.myAddress,window.web3.eth.getBalance(this.myAddress,function(e,n){e?console.error(e):t.accountBalance=Object(h["d"])(n)/Math.pow(10,18)})},checkCasinoBalance:function(){var t=this;window.web3.eth.getBalance(this.contractAddr,function(e,n){e?console.error(e):t.contractBalance=Object(h["d"])(n)/Math.pow(10,18)})}}},v=m,g=(n("3523"),n("2877")),y=Object(g["a"])(v,a,r,!1,null,"543bc076",null),k=y.exports,x=(n("7cde"),n("d1e7"),n("bf40"),n("ce5b")),_=n.n(x);o["default"].config.productionTip=!1,o["default"].use(_.a,{iconfont:"md"}),new o["default"]({render:function(t){return t(k)}}).$mount("#app")},ed08:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"d",function(){return h}),n.d(e,"c",function(){return p}),n.d(e,"a",function(){return b});var o=n("f499"),a=n.n(o),r=(n("6b54"),n("7f7f"),n("a481"),n("e814")),i=n.n(r),s=n("7618"),u=n("901e");function c(t,e){if(0===arguments.length)return null;10===(t+"").length&&(t=1e3*+t);var n,o=e||"{y}-{m}-{d} {h}:{i}:{s}";n="object"===Object(s["a"])(t)?t:new Date(i()(t));var a={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},r=o.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var n=a[e];return"a"===e?["一","二","三","四","五","六","日"][n-1]:(t.length>0&&n<10&&(n="0"+n),n||0)});return r}var l=function(t){return t instanceof u["BigNumber"]||t&&t.constructor&&"BigNumber"===t.constructor.name},d=function(t){return"string"===typeof t||t&&t.constructor&&"String"===t.constructor.name},f=function(t){return t=t||0,l(t)?t:!d(t)||0!==t.indexOf("0x")&&0!==t.indexOf("-0x")?new u["BigNumber"](t.toString(10),10):new u["BigNumber"](t.replace("0x",""),16)};function h(t){var e=f(t).toNumber();return e}function p(t){return"string"!=typeof t&&(t=a()(t,void 0,2)),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"})}function b(t){var e,n=t.trim(),o="0x"===n.substr(0,2).toLowerCase()?n.substr(2):n,a=o.length;if(a%2!==0)return alert("Illegal Format ASCII Code!"),"";for(var r=[],s=0;s<a;s+=2)e=i()(o.substr(s,2),16),r.push(String.fromCharCode(e));return w(r.join(""))}function w(t){return t.replace(/\u0000|\u0001|\u0002|\u0003|\u0004|\u0005|\u0006|\u0007|\u0008|\u0009|\u000a|\u000b|\u000c|\u000d|\u000e|\u000f|\u0010|\u0011|\u0012|\u0013|\u0014|\u0015|\u0016|\u0017|\u0018|\u0019|\u001a|\u001b|\u001c|\u001d|\u001e|\u001f|\u007F/g,"")}}});